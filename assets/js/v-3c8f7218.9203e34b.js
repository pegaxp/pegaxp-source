"use strict";(self.webpackChunkpegaxp=self.webpackChunkpegaxp||[]).push([[325],{7620:(t,e,a)=>{a.r(e),a.d(e,{data:()=>d});const d={key:"v-3c8f7218",path:"/guide/pega-marketing/capturing-unique-impression-and-click.html",title:"Capturando impressões e cliques únicos para CaptureResponse",lang:"en-US",frontmatter:{},excerpt:"",headers:[{level:2,title:"Source",slug:"source",children:[{level:3,title:"Activity: Get unique response",slug:"activity-get-unique-response",children:[]},{level:3,title:"Data Page: Get unique response",slug:"data-page-get-unique-response",children:[]},{level:3,title:"Data Transform: Capture Response Data",slug:"data-transform-capture-response-data",children:[]}]}],filePathRelative:"guide/pega-marketing/capturing-unique-impression-and-click.md",git:{updatedTime:1636921434e3,contributors:[{name:"Ian Lucas",email:"ianlucas_ferreira@hotmail.com",commits:1}]}}},2677:(t,e,a)=>{a.r(e),a.d(e,{default:()=>c});var d=a(6252);const r=(0,d._)("h1",{id:"capturando-impressoes-e-cliques-unicos-para-captureresponse",tabindex:"-1"},[(0,d._)("a",{class:"header-anchor",href:"#capturando-impressoes-e-cliques-unicos-para-captureresponse","aria-hidden":"true"},"#"),(0,d.Uk)(" Capturando impressões e cliques únicos para CaptureResponse")],-1),s=(0,d._)("div",{class:"custom-container warning"},[(0,d._)("p",{class:"custom-container-title"},"WARNING"),(0,d._)("p",null,"Este código só foi testado para Pega Marketing 8.4")],-1),i=(0,d.Uk)("Por padrão, o serviço "),n=(0,d.Uk)("CaptureResponse"),o=(0,d.Uk)(' não irá identificar se uma impressão ou clique é único dado o CustomerID enviado na requisição. Para corrigir isso, precisamos ajustar a regra que mapeia o resultado da interação do serviço. Primeiro, vamos precisar criar um Data Page para identificar se a resposta é única dado o contexto da requisição (se é impressão ou clique, por exemplo) e posteriormente definimos uma propriedade que indica que a resposta é "única" no processamento do serviço citado.'),u=(0,d.uE)('<h2 id="source" tabindex="-1"><a class="header-anchor" href="#source" aria-hidden="true">#</a> Source</h2><h3 id="activity-get-unique-response" tabindex="-1"><a class="header-anchor" href="#activity-get-unique-response" aria-hidden="true">#</a> Activity: Get unique response</h3><p><strong>CL:</strong> @baseclass · <strong>ID:</strong> GetUniqueResponse</p><h4 id="parameters" tabindex="-1"><a class="header-anchor" href="#parameters" aria-hidden="true">#</a> Parameters</h4><table><thead><tr><th>Name</th><th>Data type</th><th>Required</th><th>In/Out</th></tr></thead><tbody><tr><td>SubjectID</td><td>String</td><td>Yes</td><td>In</td></tr><tr><td>SubjectType</td><td>String</td><td>Yes</td><td>In</td></tr><tr><td>Issue</td><td>String</td><td>Yes</td><td>In</td></tr><tr><td>Group</td><td>String</td><td>Yes</td><td>In</td></tr><tr><td>Name</td><td>String</td><td>Yes</td><td>In</td></tr><tr><td>Outcome</td><td>String</td><td>Yes</td><td>In</td></tr><tr><td>CampaignID</td><td>String</td><td>No</td><td>In</td></tr></tbody></table><h4 id="pages-classes" tabindex="-1"><a class="header-anchor" href="#pages-classes" aria-hidden="true">#</a> Pages &amp; Classes</h4><table><thead><tr><th>Page name</th><th>Class</th></tr></thead><tbody><tr><td>UniqueResponsePage</td><td>Data-pxStrategyResult</td></tr></tbody></table><h4 id="definition" tabindex="-1"><a class="header-anchor" href="#definition" aria-hidden="true">#</a> Definition</h4><table><thead><tr><th></th><th>Method</th><th>Step page</th><th>Description</th></tr></thead><tbody><tr><td>1.</td><td>Page-New</td><td>UniqueResponsePage</td><td>Cria página UniqueResponsePage.</td></tr><tr><td>2.</td><td> Call GetUniqueResponse <table><tr><th colspan="2">Parameters</th></tr><tr><td>SubjectID</td><td>Param.SubjectID</td></tr><tr><td>SubjectType</td><td>Param.SubjectType</td></tr><tr><td>Group</td><td>Param.Group</td></tr><tr><td>Issue</td><td>Param.Issue</td></tr><tr><td>Name</td><td>Param.Name</td></tr><tr><td>Outcome</td><td>Param.Outcome</td></tr><tr><td>WorkID</td><td>Param.CampaignID</td></tr><tr><td>isUniqueResponse</td><td>Primary.pyIsAvailable</td></tr></table></td><td>UniqueResponsePage</td><td>Verifica se esta resposta é única.</td></tr><tr><td>3.</td><td>Page-Remove</td><td>UniqueResponsePage</td><td>Remove a página temporária.</td></tr></tbody></table><h3 id="data-page-get-unique-response" tabindex="-1"><a class="header-anchor" href="#data-page-get-unique-response" aria-hidden="true">#</a> Data Page: Get unique response</h3><p><strong>ID:</strong> D_GetUniqueResponse</p><h4 id="parameters-1" tabindex="-1"><a class="header-anchor" href="#parameters-1" aria-hidden="true">#</a> Parameters</h4><table><thead><tr><th>Name</th><th>Data type</th><th>Required</th><th>In/Out</th></tr></thead><tbody><tr><td>SubjectID</td><td>String</td><td>Yes</td><td>In</td></tr><tr><td>SubjectType</td><td>String</td><td>Yes</td><td>In</td></tr><tr><td>Issue</td><td>String</td><td>Yes</td><td>In</td></tr><tr><td>Group</td><td>String</td><td>Yes</td><td>In</td></tr><tr><td>Name</td><td>String</td><td>Yes</td><td>In</td></tr><tr><td>Outcome</td><td>String</td><td>Yes</td><td>In</td></tr><tr><td>CampaignID</td><td>String</td><td>No</td><td>In</td></tr></tbody></table><h4 id="definition-1" tabindex="-1"><a class="header-anchor" href="#definition-1" aria-hidden="true">#</a> Definition</h4><table><thead><tr><th>Definition</th><th>Value</th></tr></thead><tbody><tr><td>Structure</td><td>Page</td></tr><tr><td>Object type</td><td>@baseclass</td></tr><tr><td>Mode</td><td>Read-Only</td></tr><tr><td>Scope</td><td>Thread</td></tr></tbody></table><h4 id="load-management" tabindex="-1"><a class="header-anchor" href="#load-management" aria-hidden="true">#</a> Load management</h4><p><input type="checkbox" disabled checked> Reload once per interaction</p><h4 id="data-sources" tabindex="-1"><a class="header-anchor" href="#data-sources" aria-hidden="true">#</a> Data Sources</h4><table><thead><tr><th>No.</th><th>Source</th><th>Rule name</th></tr></thead><tbody><tr><td>1</td><td>Activity</td><td><div>GetUniqueResponse</div> <input type="checkbox" disabled checked> Pass current parameter page</td></tr></tbody></table><h3 id="data-transform-capture-response-data" tabindex="-1"><a class="header-anchor" href="#data-transform-capture-response-data" aria-hidden="true">#</a> Data Transform: Capture Response Data</h3><div class="custom-container warning"><p class="custom-container-title">WARNING</p><p>Copie esta regra da ruleset do Pega Marketing. Normalmente <code>PegaMKT-Engine</code>.</p></div><p><strong>CL:</strong> Int-PegaCDH-Container-Request · <strong>ID:</strong> CaptureResponseData</p><h4 id="definition-2" tabindex="-1"><a class="header-anchor" href="#definition-2" aria-hidden="true">#</a> Definition</h4><table><thead><tr><th></th><th>Action</th><th>Target</th><th>Relation</th><th>Source</th></tr></thead><tbody><tr><td>Add Sibling Above</td><td>Set</td><td>Param.pySubjectType</td><td>equal to</td><td>D_CDHSubjectDictionary[DictionaryName:&quot;Customer&quot;].PrimaryLevelClass</td></tr><tr><td>1.26</td><td>Set</td><td>.pySubjectType</td><td>equal to</td><td>Param.pySubjectType</td></tr><tr><td>Add Sibling Below</td><td>Set</td><td>.IsUniqueResponse</td><td>equal to</td><td>D_GetUniqueResponse[SubjectID: Primary.CustomerID, SubjectType: Param.pySubjectType, Issue: .Issue, Group: .Group, Name: .Name, Outcome: .Outcome, CampaignID: .CampaignID].pyIsAvailable</td></tr></tbody></table>',24),p={},c=(0,a(3744).Z)(p,[["render",function(t,e){const a=(0,d.up)("RouterLink");return(0,d.wg)(),(0,d.iD)(d.HY,null,[r,s,(0,d._)("p",null,[i,(0,d.Wm)(a,{to:"/reference/service-rest.html#captureresponse"},{default:(0,d.w5)((()=>[n])),_:1}),o]),u],64)}]])},3744:(t,e)=>{e.Z=(t,e)=>{for(const[a,d]of e)t[a]=d;return t}}}]);